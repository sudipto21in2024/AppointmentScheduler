# UI Flow: Tenant Admin - Dashboard

## 1. Overview

This document outlines the UI flow for the Tenant Admin Dashboard within the Multi-Tenant Appointment Booking System. This dashboard serves as the central control panel for clinic administrators and managers, providing a high-level overview of their business operations, key performance indicators, and quick access to management functionalities. It aligns with FR-4.1, FR-4.2, and relevant aspects of Journey 2: Small to Medium Clinic - Multi-Practitioner Scheduling.

## 2. Purpose

To provide tenant administrators with a consolidated view of their clinic's performance, resource utilization, and overall system health, enabling them to make informed decisions and efficiently manage their service offerings, staff, and bookings.

## 3. Actors

*   **Clinic Administrator:** The primary user responsible for managing a tenant's operations.

## 4. Preconditions

*   The user is logged into the platform with a "Tenant Admin" role.
*   The user has navigated to the dashboard (typically the default landing page after login).

## 5. Postconditions

*   User has a clear overview of their clinic's operational status and key metrics.
*   User can quickly navigate to relevant sections for detailed management.

## 6. Flow Steps

The Tenant Admin Dashboard will feature various widgets and summary cards, providing actionable insights.

### 6.1. Page Structure

**Template Type:** Layout 2 (Main Application / Logged In).
**Specific Layout Pattern:** Header, footer, and a main content area with a collapsible sidebar. The main content area will be organized into a grid of customizable widgets.

**UI Elements:**
*   **Header:** Standard logged-in header with logo, company name, user profile info, notifications drawer, and breadcrumb. The breadcrumb should indicate "Dashboard".
*   **Sidebar:** Tenant Admin-specific navigation menu (e.g., Dashboard, Services, Bookings, Staff, Customers, Analytics, Settings, Subscription). The "Dashboard" item will be active.
*   **Main Content Area:**
    *   **Page Title:** "Dashboard" or "Clinic Overview"
    *   **Date Range Selector:** Allows filtering dashboard data by time period (e.g., "Today", "Last 7 Days", "This Month", "Custom Range").
    *   **Key Performance Indicator (KPI) Cards:**
        *   **Total Bookings:** Number of appointments booked.
        *   **Total Revenue:** Gross revenue generated.
        *   **Upcoming Appointments:** Count of appointments in the near future.
        *   **Available Slots:** Number of open time slots.
        *   **New Customers:** Count of new customer sign-ups.
    *   **Charts/Graphs (Dynamic Widgets):**
        *   **Booking Trends:** Line chart showing bookings over time.
        *   **Revenue by Service:** Bar chart showing revenue distribution across services.
        *   **Staff Performance:** Bar chart comparing booking volumes or revenue generated by different practitioners.
        *   **Peak Booking Times:** Heatmap or bar chart indicating busiest hours/days.
    *   **Recent Activity Feed/Table:**
        *   Table listing recent bookings, cancellations, or new customer registrations.
        *   Each entry shows relevant details and a quick link to the associated record.
    *   **Quick Action Buttons:**
        *   "Create New Service"
        *   "Add New Staff Member"
        *   "View All Bookings"
        *   "Manage Availability"
    *   **System Health/Alerts Widget (Optional):** Displays critical system alerts or subscription usage warnings.
*   **Footer:** Standard logged-in footer.

## 7. Angular Component Definitions

*   **`TenantAdminDashboardComponent` (Smart Component):**
    *   **Purpose:** Serves as the main dashboard for tenant administrators, fetching and orchestrating data for various widgets.
    *   **Selector:** `app-tenant-admin-dashboard`
    *   **Location:** `src/app/features/tenant-admin/dashboard/tenant-admin-dashboard.component.ts`
    *   **TypeScript Logic:**
        *   Fetches dashboard data (KPIs, chart data, recent activity) from a `DashboardService` or specific analytics services.
        *   Manages the date range filter.
        *   Passes data to child presentation components (KPI cards, chart components).
        *   Handles navigation to detailed management pages.
        *   Injects `DashboardService`, `AnalyticsService`, `UserService`, `BookingService`.
    *   **Template:** Organizes `KpiCardComponent` instances, `ChartComponent` instances, and `RecentActivityTableComponent`.

*   **`KpiCardComponent` (Dumb Component):**
    *   **Purpose:** Displays a single key performance indicator.
    *   **Selector:** `app-kpi-card`
    *   **Inputs:** `title: string`, `value: number | string`, `icon: string`, `change: number` (optional, for percentage change).
    *   **Template:** Renders the KPI title, value, and icon.

*   **`ChartComponent` (Dumb Component):**
    *   **Purpose:** Reusable component for displaying various types of charts (bar, line, pie).
    *   **Selector:** `app-chart`
    *   **Inputs:** `type: 'bar' | 'line' | 'pie'`, `data: any`, `options: any`.
    *   **Template:** Integrates a charting library (e.g., Chart.js, Ngx-Charts) to render the graph.

*   **`RecentActivityTableComponent` (Dumb Component):**
    *   **Purpose:** Displays a list of recent activities in a table format.
    *   **Selector:** `app-recent-activity-table`
    *   **Inputs:** `activityData: ActivityDto[]`.
    *   **Template:** Renders a table with columns for activity type, details, date, and status.

## 8. Styling and Responsiveness

*   **Layout:** Responsive grid layout for dashboard widgets. Widgets will rearrange and stack on smaller screens.
*   **KPI Cards:** Visually distinct, possibly with color-coded indicators for positive/negative change.
*   **Charts:** Clear and readable, adapting to available space.
*   **Recent Activity:** Table will be responsive (e.g., horizontal scroll on mobile).
*   **Theming:** Adheres to `DesignTokens.json` and `StyleGuide.md`.

## 9. Accessibility Considerations

*   Semantic HTML for all dashboard widgets and sections.
*   Keyboard navigation for date pickers and interactive elements within widgets.
*   ARIA attributes for dynamic content updates and chart descriptions.
*   Sufficient color contrast for text and chart elements.
*   Alternative text for all chart images/visualizations.

## 10. Integration

*   **Backend API:** `DashboardService` and `AnalyticsService` will communicate with backend API endpoints to retrieve aggregated dashboard data.
*   **Routing:** Quick action buttons and links within recent activity will navigate to respective detailed management pages (e.g., `/tenant-admin/services/create`, `/tenant-admin/staff`).